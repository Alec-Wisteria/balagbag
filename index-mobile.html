<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BodyCheck Fitness</title>
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <link rel="shortcut icon" href="images/logo.jpg" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

:root {
    --main-color: #443;
    --border-radius: 95% 4% 97% 5% / 4% 94% 3% 95%;
    --border-radius-hover: 4% 95% 6% 95% / 95% 4% 92% 5%;
    --border: .2rem solid var(--main-color);
    --border-hover: .2rem dashed var(--main-color);
}

* {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    outline: none;
    border: none;
    text-decoration: none;
    text-transform: capitalize;
    transition: all .2s linear;
}

html {
    font-size: 62.5%;
    overflow-x: hidden;
    scroll-padding-top: 7rem;
    scroll-behavior: smooth;
}

section {
    padding: 2rem 9%;
}

.heading {
    font-size: 9rem;
    text-transform: uppercase;
    color: transparent;
    -webkit-text-stroke: .05rem var(--main-color);
    letter-spacing: .2rem;
    text-align: center;
    pointer-events: none;
    position: relative;
}

.heading span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    color: var(--main-color);
    font-size: 3rem;
}

.btn {
    display: inline-block;
    padding: .9rem 1.5rem;
    border: var(--border);
    border-radius: var(--border-radius);
    color: var(--main-color);
    background: none;
    cursor: pointer;
    margin-top: 1rem;
    font-size: 1.7rem;
}

.btn:hover {
    border-radius: var(--border-radius-hover);
    border: var(--border-hover);
}

/* HEADER */

.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 1000;
    background: #fff;
    box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .1);
    padding: 2rem 9%;
}

.header .logo {
    color: var(--main-color);
    font-size: 2.3rem;
}

.header .logo i {
    padding-left: .5rem;
}

.header .navbar a {
    margin: 0 1rem;
    font-size: 1.7rem;
    color: var(--main-color);
}

.header .btn {
    margin-top: 0;
}

#menu-btn {
    font-size: 3rem;
    color: var(--main-color);
    cursor: pointer;
    display: none;
}
.header-profile-details {
  display: flex;
  align-items: center;
  gap: 10px;
}
.header-profile-details img {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  border: 2px solid #a084ee;
  object-fit: cover;
  background: #fff;
}
.header-profile-details span {
  font-size: 1.2rem;
  font-weight: 600;
  color: #4d79ff;
  max-width: 80px;
  white-space: normal;
  word-break: break-word;
}
.header-profile-details i {
  font-size: 1.6rem;
  cursor: pointer;
  color: #4d79ff;
  margin-left: 6px;
  transition: color 0.2s;
}
.header-profile-details i:hover {
  color: #23233a;
}
.header .profile-details{
  position: fixed;
  bottom: 0;
  width: 260px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #c2c1d4;
  padding: 12px 0;
  transition: all 0.5s ease;
}
.header.close .profile-details{
  background: none;
}
.header.close .profile-details{
  width: 78px;
}
.header .profile-details .profile-content{
  display: flex;
  align-items: center;
}
.header .profile-details img{
  height: 52px;
  width: 52px;
  object-fit: cover;
  border-radius: 16px;
  margin: 0 14px 0 12px;
  background: #1d1b31;
  transition: all 0.5s ease;
}
.header.close .profile-details img{
  padding: 10px;
}
.header .profile-details .profile_name {
  color: #000000;
  font-size: 18px;
  font-weight: 500;
  white-space: normal;
  max-width: 120px;
}
.header.close .profile-details i,
.header.close .profile-details .profile_name,
.header.close .profile-details .job{
  display: none;
}
.header .profile-details .job{
  font-size: 12px;
}
.modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
      }
      .modal-content {
        background-color: white;
        margin: 15% auto;
        padding: 20px;
        border-radius: 8px;
        width: 300px;
        text-align: center;
      }
      .modal-button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px;
        font-size: 16px;
      }
      .modal-button.confirm {
        background-color: #4CAF50;
        color: white;
      }
      .modal-button.cancel {
        background-color: #f44336;
        color: white;
      }
      :root {
  --menu-color: #11101d;
}

/* HOME */

.home-content{
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}
.home-section .home-content .bx-menu,
.home-section .home-content .text{
  color: var(--menu-color);
  transition: color 0.3s ease;
}
.home-section .home-content .bx-menu{
  cursor: pointer;
  margin-right: 10px;
  font-size: 35px;
}
.home-section .home-content .text{
  font-size: 26px;
  font-weight: 600;
}



.container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    margin-top: 100px;
  }
  .text-content {
    flex: 1;
    padding-right: 20px;
  }

  .text-content h1 {
    font-size: 50px;
    margin-bottom: 20px;
  }

  .text-content p {
    font-size: 18px;
    line-height: 1.6;
    margin-bottom: 20px;
  }

  .text-content button {
    background-color: blue;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: 0.3s;
  }

  .text-content button:hover {
    background-color: #808080;
  }

  .image-content {
    flex: 1;
    display: flex;
    justify-content: center;
  }

  .image-content img {
    max-width: 100%;
    height: auto;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  }

@keyframes float {

    0%,
    100% {
        transform: translateY(0rem);
    }

    50% {
        transform: translateY(-7rem);
    }
}

.home .row .content h3 {
    font-size: 6.5rem;
    color: var(--main-color);
    text-transform: uppercase;
    font-family: serif;
}

 @media screen and (max-width: 768px) {
    .container {
      flex-direction: column;
      text-align: center;
    }

    .text-content {
      padding-right: 0;
      margin-bottom: 20px;
    }

    .image-content img {
      width: 80%;
    }
  }

@media (max-width: 991px) {
    html {
        font-size: 55%;
    }

    .header {
        padding: 3rem;
    }

    section {
        padding: 2rem;
    }
}

@media (max-width: 768px) {
    .heading {
        font-size: 6rem;
    }

    .heading span {
        font-size: 2.3rem;
    }

    #menu-btn {
        display: initial;
    }

    #menu-btn.fa-times {
        transform: rotate(180deg);
    }

    .header .navbar {
        position: absolute;
        top: 99%;
        left: 0;
        right: 0;
        background: #fff;
        clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
    }

    .header .navbar.active {
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    }

    .header .navbar a {
        display: block;
        font-size: 2.2rem;
        margin: 0;
        padding: 1.5rem 2rem;
    }

    .home {
        text-align: center;
    }

    .home .row .content h3 {
        font-size: 4rem;
    }

    .menu .box-container .box {
        margin-left: 0;
        margin-top: 6rem;
        flex-flow: column;
        text-align: center;
    }

    .menu .box-container .box img {
        margin-left: 0;
        margin-top: -6rem;
    }
}

@media (max-width: 450px) {
    html {
        font-size: 50%;
    }

    .home .row .image img {
        height: auto;
        width: 100%;
    }
}


</style>

<body>

<header class="header">
    <div id="menu-btn" class="fas fa-bars"></div>
    <a href="index.html" class="logo">BodyCheck Fitness</a>
    <div class="header-profile-details" id="header-profile-details" style="display: none;">
        <img id="header-profile-img" src="images/placeholder.png" alt="profileImg">
        <span id="header-username">Guest</span>
        <i class='bx bx-log-out' onclick="showLogoutConfirmation()"></i>
    </div>
    <nav class="navbar">
        <a href="index-mobile.html" class="navbar-link">home</a>
        <a href="calculator-mobile.html" class="navbar-link">calculator</a>
        <a href="profile-mobile.html" class="navbar-link">buy</a>
        <a href="download.html" class="navbar-link">Download</a>
        <div class="profile-details" id="profile-details" style="display: none;">
          <div class="profile-content">
              <img src="images/placeholder.png" alt="profileImg">
          </div>
          <div class="name-job">
              <div class="profile_name" id="username"></div>
          </div>
          <!-- The logout icon now triggers the modal -->
          <i class='bx bx-log-out' onclick="showLogoutConfirmation()"></i>
      </div>
      
      <!-- Logout Confirmation Modal -->
      <div id="logoutModal" class="modal">
          <div class="modal-content">
              <h3>Are you sure you want to log out?</h3>
              <button class="modal-button confirm" onclick="logout()">Confirm</button>
              <button class="modal-button cancel" onclick="closeLogoutModal()">Cancel</button>
          </div>
      </div>                
  </li>
</ul>
  </div>
    </nav>
</header>

<section class="home-section">
    <div class="home-content">
      <i class='bx bx-menu'></i>
      <span class="text">BodyCheck Fitness</span>
    </div>
    <div class="container">
      <div class="text-content">
        <h1>Welcome to BodyCheck</h1>
        <p>
          BodyCheck is your personal health companion. Use our BMI calculator to understand your body mass index and get personalized recommendations to improve your health and fitness.
        </p>
        <button onclick="window.location.href='calculator.html'">Let's Get Started</button>
      </div>
      <div class="image-content">
        <img src="images/logo.jpg" alt="logo" style="border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
      </div>
    </div>
  </section>

<script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>
<script>
    let menu = document.querySelector('#menu-btn');
let navbar = document.querySelector('.navbar');

menu.onclick = () => {
    menu.classList.toggle('fa-times');  // Toggle the icon to show the "close" icon
    navbar.classList.toggle('active');  // Show/hide the navbar
};

// Close the menu when the page is scrolled
window.onscroll = () => {
    menu.classList.remove('fa-times');  // Remove the "close" icon
    navbar.classList.remove('active');  // Hide the navbar
};

// Change the main home image when a smaller image is clicked in the image slider
document.querySelectorAll('.image-slider img').forEach(image => {
    image.onclick = () => {
        var src = image.getAttribute('src');  // Get the src of the clicked image
        document.querySelector('.main-home-image').src = src;  // Set it as the main image
    };
});
</script>
<script type="module">
    import { supabase } from './supabaseClient.js';
    // Profile details elements
    document.addEventListener('DOMContentLoaded', async () => {
      const { data: { user } } = await supabase.auth.getUser();

      if (user) {
        // Fetch additional profile info if stored in a 'profiles' table
        const { data: profile } = await supabase
          .from('profiles')
          .select('*')
          .eq('id', user.id)
          .single();

        // Show the profile section
        document.getElementById('profile-details').style.display = 'flex';
        document.getElementById('username').textContent = profile?.username || 'Guest';

        // Set sidebar profile image
        const sidebarProfileImg = document.querySelector('#profile-details img');
        let avatarUrl = 'images/placeholder.png';
        const avatarPath = profile?.avatar_url;
        if (avatarPath) {
          if (avatarPath.startsWith('http')) {
            avatarUrl = avatarPath;
          } else {
            const { data } = supabase
              .storage
              .from('avatars')
              .getPublicUrl(avatarPath);
            if (data && data.publicUrl) {
              avatarUrl = data.publicUrl;
            }
          }
        }
        if (sidebarProfileImg) sidebarProfileImg.src = avatarUrl;
      }
    });

    window.showLogoutConfirmation = function () {
      document.getElementById('logoutModal').style.display = 'block';
    }

    window.closeLogoutModal = function () {
      document.getElementById('logoutModal').style.display = 'none';
    }

    window.logout = async function () {
      await supabase.auth.signOut();
      window.location.href = 'login.html'; // or wherever your login page is
    }

    // Check for a hash message in the URL
    window.addEventListener("DOMContentLoaded", () => {
  // Existing theme logic...
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "dark") {
    document.body.classList.add("dark-mode");
    document.documentElement.classList.add("dark-mode");
  }

  // Show alert if #message= is present in the URL
  const hash = window.location.hash;
  if (hash.startsWith("#message=")) {
    // Replace + with space and decode URI components
    const message = decodeURIComponent(hash.replace("#message=", "").replace(/\+/g, " "));
    alert(message);
    history.replaceState(null, "", window.location.pathname + window.location.search);
  }

  // Show alert if #error= is present in the URL
  if (hash.startsWith("#error=")) {
    // Extract error message from hash (handles both error and error_description)
    const params = new URLSearchParams(hash.substring(1));
    let errorMsg = params.get("error_description") || params.get("error") || "An error occurred.";
    errorMsg = decodeURIComponent(errorMsg.replace(/\+/g, " "));
    alert(errorMsg);
    history.replaceState(null, "", window.location.pathname + window.location.search);
  }

  // Show alert if #email_changed is present in the URL
  if (hash.startsWith("#email_changed")) {
    alert("Your email has been successfully changed!");
    history.replaceState(null, "", window.location.pathname + window.location.search);
  }
});
</script>
</body>
</html>
