<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Login & Signup</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
  <link rel="shortcut icon" href="images/logo.jpg" type="image/x-icon">
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css'>
</head>
<style>
    @import url('https://fonts.googleapis.com/css?family=Montserrat:400,800');

* {
	box-sizing: border-box;
}

body {
	background: linear-gradient(135deg, #f8faff 60%, #e6e6fa 100%);
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
	font-family: 'Montserrat', sans-serif;
	height: 100vh;
	margin: -20px 0 50px;
}

h1 {
	font-weight: bold;
	margin: 0;
}

h2 {
	text-align: center;
}

p {
	font-size: 14px;
	font-weight: 100;
	line-height: 20px;
	letter-spacing: 0.5px;
	margin: 20px 0 30px;
}

span {
	font-size: 12px;
}

a {
	color: #333;
	font-size: 14px;
	text-decoration: none;
	margin: 15px 0;
}

button {
	border-radius: 20px;
	border: none;
	background: linear-gradient(90deg, #4d79ff 0%, #a084ee 100%);
	color: #fff;
	font-size: 15px;
	font-weight: bold;
	padding: 12px 45px;
	letter-spacing: 1px;
	text-transform: uppercase;
	transition: background 0.2s, transform 80ms ease-in;
	box-shadow: 0 2px 8px rgba(77,121,255,0.10);
}

button:hover {
	background: linear-gradient(90deg, #a084ee 0%, #4d79ff 100%);
}

button:active {
	transform: scale(0.95);
}

button:focus {
	outline: none;
}

button.ghost {
	background: linear-gradient(90deg, #4d79ff 0%, #a084ee 100%);
	color: #fff;
}

button.ghost:hover {
	background: linear-gradient(90deg, #a084ee 0%, #4d79ff 100%);
}

form {
	background-color: #FFFFFF;
	border-radius: 14px;
	box-shadow: 0 2px 8px rgba(160,132,238,0.07);
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	padding: 0 50px;
	height: 100%;
	text-align: center;
}

input {
	background-color: #f8faff;
	border: 1.5px solid #bdbdfc;
	border-radius: 10px;
	padding: 12px 15px;
	margin: 8px 0;
	width: 100%;
	font-size: 16px;
	transition: border 0.2s;
}

input:focus {
	border: 1.5px solid #4d79ff;
	background: #fff;
	outline: none;
}

.container {
	background: #fff;
	border-radius: 18px;
	box-shadow: 0 8px 40px rgba(77,121,255,0.13), 0 1.5px 8px rgba(160,132,238,0.10);
	position: relative;
	overflow: hidden;
	width: 768px;
	max-width: 98vw;
	min-height: 480px;
	animation: popIn 0.7s cubic-bezier(.68,-0.55,.27,1.55);
}

@keyframes popIn {
	0% { transform: scale(0.92) translateY(30px); opacity: 0; }
	100% { transform: scale(1) translateY(0); opacity: 1; }
}

.form-container {
	position: absolute;
	top: 0;
	height: 100%;
	transition: all 0.6s ease-in-out;
}

.sign-in-container {
	left: 0;
	width: 50%;
	z-index: 2;
}

.container.right-panel-active .sign-in-container {
	transform: translateX(100%);
}

.sign-up-container {
	left: 0;
	width: 50%;
	opacity: 0;
	z-index: 1;
}

.container.right-panel-active .sign-up-container {
	transform: translateX(100%);
	opacity: 1;
	z-index: 5;
	animation: show 0.6s;
}

@keyframes show {
	0%, 49.99% {
		opacity: 0;
		z-index: 1;
	}

	50%, 100% {
		opacity: 1;
		z-index: 5;
	}
}

.overlay-container {
	position: absolute;
	top: 0;
	left: 50%;
	width: 50%;
	height: 100%;
	overflow: hidden;
	transition: transform 0.6s ease-in-out;
	z-index: 100;
}

.container.right-panel-active .overlay-container{
	transform: translateX(-100%);
}

.overlay {
	background: #F2eee3;
	background: -webkit-linear-gradient(to right, #F2eee3, #e7d4c5);
	background: linear-gradient(to right, #F2eee3, #e7d4c5);
	background-repeat: no-repeat;
	background-size: cover;
	background-position: 0 0;
	color: black;
	position: relative;
	left: -100%;
	height: 100%;
	width: 200%;
  	transform: translateX(0);
	transition: transform 0.6s ease-in-out;
}

.container.right-panel-active .overlay {
  	transform: translateX(50%);
}

.overlay-panel {
	position: absolute;
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	padding: 0 40px;
	text-align: center;
	top: 0;
	height: 100%;
	width: 50%;
	transform: translateX(0);
	transition: transform 0.6s ease-in-out;
}

.overlay-left {
	transform: translateX(-20%);
}

.container.right-panel-active .overlay-left {
	transform: translateX(0);
}

.overlay-right {
	right: 0;
	transform: translateX(0);
}

.container.right-panel-active .overlay-right {
	transform: translateX(20%);
}

social-container {
	margin: 20px 0;
}

.social-container a {
	border: 1.5px solid #a084ee;
	border-radius: 50%;
	display: inline-flex;
	justify-content: center;
	align-items: center;
	margin: 0 5px;
	height: 40px;
	width: 40px;
	background: #f8faff;
}

.social-container a:hover {
	background: #a084ee;
	color: #fff;
}

.toggle-password {
  position: absolute;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  color: #888;
  z-index: 10;
  background: none;
  border: none;
  padding: 0;
}

.input-wrapper {
  position: relative;
  width: 100%;
}

.toggle-password i {
  font-size: 18px;
}

input[type="password"] {
  padding-right: 36px;
}

@media (max-width: 900px) {
	.container {
		width: 98vw;
		min-width: unset;
	}
}

@media (max-width: 600px) {
	.container {
		width: 99vw;
		min-width: unset;
		border-radius: 10px;
		box-shadow: 0 2px 8px rgba(77,121,255,0.10);
	}
	form {
		padding: 0 10vw;
	}
	.overlay-panel {
		padding: 0 10vw;
	}
	h1 {
		font-size: 1.3rem;
	}
}

@media (max-width: 400px) {
	form, .overlay-panel {
		padding: 0 2vw;
	}
}

body.dark-mode {
	background: linear-gradient(135deg, #23233a 60%, #2c2c2e 100%) !important;
}

body.dark-mode .container {
	background: #23233a !important;
	box-shadow: 0 8px 40px rgba(160,132,238,0.13), 0 1.5px 8px rgba(160,132,238,0.10);
}

body.dark-mode form {
	background: #2c2c2e !important;
	color: #f5f5f7 !important;
}

body.dark-mode input {
	background: #23233a;
	color: #f5f5f7;
	border: 1.5px solid #4d79ff;
}

body.dark-mode input:focus {
	background: #2c2c2e;
}

body.dark-mode button, body.dark-mode .ghost {
	background: linear-gradient(90deg, #4d79ff 0%, #a084ee 100%);
	color: #fff;
}

body.dark-mode button:hover, body.dark-mode .ghost:hover {
	background: linear-gradient(90deg, #a084ee 0%, #4d79ff 100%);
	color: #fff;
}

body.dark-mode .social-container a {
	background: #23233a;
	color: #a084ee;
	border: 1.5px solid #a084ee;
}

body.dark-mode .social-container a:hover {
	background: #a084ee;
	color: #fff;
}
</style>

<body>
<div class="container" id="container">
	<div class="form-container sign-up-container">
		<form class="register-form" id="registerForm">
			<h1>Create Account</h1>
			<input type="text" id="registerUsername" placeholder="Name" required/>
			<input type="email" id="registerEmail" placeholder="Email" required/>
			<div class="input-wrapper">
				<input type="password" id="registerPassword" placeholder="Password" required/>
				<span class="toggle-password" toggle="#registerPassword"><i class="fas fa-eye"></i></span>
			</div>
			<div class="input-wrapper">
				<input type="password" id="confirmPassword" placeholder="Confirm Password" required/>
				<span class="toggle-password" toggle="#confirmPassword"><i class="fas fa-eye"></i></span>
			</div>
			<button type="submit">Sign Up</button>
		</form>
	</div>
	<div class="form-container sign-in-container">
		<form class="login-form" id="loginForm">
			<h1>Sign in</h1>
			<input type="email" id="loginEmail" placeholder="Email" required/>
			<div class="input-wrapper">
				<input type="password" id="loginPassword" placeholder="Password" required/>
				<span class="toggle-password" toggle="#loginPassword"><i class="fas fa-eye"></i></span>
			</div>
			<a href="forgot-password.html">Forgot your password?</a>
			<button type="submit">Sign In</button>
		</form>
	</div>
	<div class="overlay-container">
		<div class="overlay">
			<div class="overlay-panel overlay-left">
				<h1>Welcome Back!</h1>
				<p>To keep connected with us please login with your personal details</p>
				<button class="ghost" id="signIn">Sign In</button>
			</div>
			<div class="overlay-panel overlay-right">
				<h1>Hi There!</h1>
				<p>Enter your personal details to open an account with us</p>
				<button class="ghost" id="signUp">Sign Up</button>
			</div>
		</div>
	</div>
</div>
<script>
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('container');

    signUpButton.addEventListener('click', () => {
        container.classList.add("right-panel-active");
    });

    signInButton.addEventListener('click', () => {
        container.classList.remove("right-panel-active");
    });
</script>
<script>
	document.querySelectorAll('.toggle-password').forEach(function(toggle) {
	  toggle.addEventListener('click', function() {
		const input = document.querySelector(this.getAttribute('toggle'));
		if (input.type === 'password') {
		  input.type = 'text';
		  this.innerHTML = '<i class="fas fa-eye-slash"></i>';
		} else {
		  input.type = 'password';
		  this.innerHTML = '<i class="fas fa-eye"></i>';
		}
	  });
	});
	</script>
<script type="module">
// Login
import { signInUser } from './supabaseClient.js';

document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;

    const success = await signInUser(email, password);
    if (success) {
        alert('Login successful!');
        window.location.href = 'index.html';
    } else {
        alert('Login failed. Please check your credentials.');
    }
});
</script>
<script type="module">

import { signUpUser } from './supabaseClient.js';

// Sign Up
document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
			const confirmPassword = document.getElementById('confirmPassword').value;

            const success = await signUpUser(username, email, password, confirmPassword);
            if (success) {
                alert('User account created successfully! Please check your email and click the link to activate your account.');
            } else {
                alert('Registration failed. Please try again.');
            }
        });
</script>
<script type="module">
import { supabase } from './supabaseClient.js';

// Redirect to index.html if already logged in
const { data: { user } } = await supabase.auth.getUser();
if (user) {
    window.location.href = 'index.html';
}
</script>

</body>

</html>
